### IT 架构 https://mp.weixin.qq.com/s?__biz=MzU5NDAzNDEyMA==&mid=2247484105&idx=1&sn=4daeff5b2fd2964ce24fd70b54433a77
1. **需求优化最重要**。搞架构设计最重要的就是砍需求，将**上层应用的需求优化删减，让同级的业务能容错**。
> 上层需求优化，即前端对后端的操作少，查询少，容错多。同级的容错可以看做是应用间的需求优化，比如服务幂等就可以重试解耦。而系统A等待系统B就会出现死锁的架构悲剧
> 比如电商ERP系统的某些耗时查询操作，前端操作一次后台就得锁库查一次。实际操作过程中用户可能会重复点击查询于是就跪 了。但是首先得理解用户并不要求实时查询。
> 了解用户核心诉求比强堆需求要更重要。
2. 集群设计通用规则，**前端复制后端拆，实时改异步，IO-算力-空间互换** === **经典微机系统：中央处理器，主存储器，IO设备**，做架构就要上集群，而集群设计调优就是依靠这三板斧。
>  前端是管道是逻辑是操作入口，是视图，而后端是**状态****数据**，所以前端可以复制抗压，后端要做业务拆分，常见的就是数据库拆库拆表拆键值，服务拆的越散微操做就越爽，**但全局操作开销就更大更难控制**。 架构师将一个无脑大事务拆分成多个小事务，这就是异步架构，但拆分事务就跟拆分数据表一样，拆散的小事务需要更高业务层级上做全局事务保障。
> 实时改异步，大部分的实时需求都不是真的业务需求，都是可以改成异步的。
> 在群集性能规划中，网络和硬盘IO+CPU算力+磁盘和内存空间是可以互换的，架构师要完成补不足而损有余的选型。比如：数据压缩就是再用算力置换空间和IO, 缓存是用空间和IO来缓解算力，每个新的选型都会带来细节上的万千变化，但每种变化都是符合自然规律有章可循的。
> **一个经典微机系统就是中央处理器+主存储器+IO设备，这几个概念居然和群集性能规划是一一对应。**
3. **理解硬件的天性**。**别让硬盘抗性能，别让内存保持久，别让网线抗稳定**。 架构层软件技术已经足够成熟，所谓技术选型不如说是适应场景；在做具体角色选型时，**最深度最容易忽视的原则就是*顺应硬件天性***
4. **数据不会凭空产生，但会凭空消失**。所以为了**防止数据全部或部分凭空消失**，数据的容错校验、关联复原、冷热备份和安全删除都要考虑到位（或者是日志）。
> 在生僻业务中，没人回告诉我们该有那些服务，我们只能依靠一个又一个的**访问逻辑图和数据生命周期**，来摸索集群内有哪些角色和依赖关系。
> 架构师的核心技能包扩画好访问逻辑和数据流量图，因为问题现状描述清楚了，问题就解决了一多半。一个好的业务访问逻辑图，不仅仅是几个圈圈几条线连起来，其信息量应当大到包罗访问过程的所有元素，当然也要详略得当高亮关键。
5. **各个环节都不可盲信**，**容灾设计都是在*尽人事听天命*之间做好权衡**。
    * 业务应用不可靠，如果该应用能快速重建也不阻塞其他应用，月级偶发的内存泄漏和意外崩溃都是可以接受的。

    * 支撑性服务不可靠，对于大部分业务，预估一年都不丢一次数据，SLA能到99.95%就可以了。

    * 操作系统故障崩溃，现在商用系统内核都很稳定，一般故障都出在硬件驱动兼容性上，或者有些照本宣科的傻瓜乱改默认参数。

    * 网络不稳定，内网通用的技术方案很成熟，少提复杂需求内网就能很稳定，我们最烦的是单条网线处于半死不活状态；IDC的外网SLA默认就是3个9，所以我说支撑性服务能到99.95%就已经很可靠了。

    * 硬件不稳定，大部分架构师根本不懂硬件，只要不出硬件批次故障，架构师就可以将单点硬件和系统、服务绑在一起做可靠性设计。

    * 人力误操作，我们招不到不出故障的人，我自己达不到不出错的标准。只要员工没有恶意破坏，出了大范围故障就是群集健壮性设计不到位，**别让操作工给技术总监和架构师顶包**。

    * 监控和备份是运维的职责，但架构师需要帮忙确认目的正确性，别备份了半天废数据，监控只看telnet80。

    
# 把高远只当做是一种追求而不付诸时间就是不切实际，当我们把它当成时时顾看的行动时就是有眼界视野
* 架构师的关注话题的分类
    1. 目标需求
        * 性能（是否满足性能需求）
        * 易用性（是否易用）
        * 可用性（是否能用）
        * 安全性（是否安全）
        * 可靠性（是否稳定）
        * 功能性（功能点是否完备）
    2. 空间需求 （为啥叫空间需求）
        * 可测试性
        * 可完成性
        * 集成性
        * 概念完整性
    3. 时间需求
        * 可修改性
        * 可变性
        * 可移植性
        * 可分解性
        * 可重用性
* 认识系统不是架构系统，认识系统在于将系统中核心概念抽象出来，将核心逻辑梳理出来，将核心问题（关系，依赖，冲突）揭示出来，使核心问题对其外在（例如用户可见的产品）不构成明显的影响。

## 知识的构建
### 观察者的背景差异带来了更多不同的正确影像
* 系统是一种认知而非是分析的结果
* 系统本身就是求同存异，在差异中找到共性，保留差异，提炼共性
* 对现实世界的复制并不一定是一个很好的组织方式，可这种对现实世界的复制却是进一步架构的基础。
* 大部分系统的用户都期望系统的底线是对现实世界的一份复制，即完成手头的工作
### 当我们试图去表达现实系统的“一个映像”时，我们总是存有特定的意图，这种”意图“决定了我们的观察视角，也决定了我们之后表达的结果。
例如书中说的例子：v0.0.0.2的意图是通过映射现实中的管理责权关系，而不是通过区分功能模块的使用群体来规划系统，这种规划仅仅是对现实系统的一种简单复制（不过我觉得这也是一种意图）

### 抽象概念与模型是展示架构意图的方式之一
* 认识系统首先需要认识使用的人
    * 使用者是谁，包括谁
    * 使用者之间的关系
### 系统的识得，是在架构意图的逐步清晰中渐行渐显的
意图是“识得”的核心（原作者认为知识的建立包括知得与识得，知得是知道了外在表现，而识得是了解了内在核心），即“你想要什么”决定了系统如何构画，而不仅仅是对现实系统的复制。
意图是架构真正的灵魂。架构活动知识将这种意图表达在架构产出中，并阐述这一意图的合理性；如何得到或者形成意图才是架构的精髓，之本质是通过抽象过程，对既有系统的再认识与再创造。简单的说，如果架构师没有意图，那么系统只是目标系统的某一时间上的静态映像；而架构师如果有意图，那么系统也就有了灵魂，就能跟随膜表系统的实际需求的发展而演化，或至少为这种演化留备了可能。

"意图"存在的两个条件
1. 他必须是能被规则化的，这是主要条件；
2. 作为附加收益，规则化也可以为其他系统构件带来便；

只有在主要条件成立，并且附加收益丰厚的时候，我们才会确认这一“意图”的必要性。

对这两个条件的思考是架构过程中的一种权衡，即从“想要什么”到“能要什么”的一个过渡。这个过程中，“控制架构欲望”是一种关键素质。而这一素质的源起与核心，是架构师对自身职责的不断的反复的省思，即”想要什么“应当能决定一个系统在时间与空间两个方面的特性，而不是仅仅处于客户需求或自我喜好。

### 我们要实现的系统只是现实系统的一个映像



### 架构三原则
1. 合适原则：合适优于业界领先
2. 简单原则：简单优于复杂
3. 演化原则：演化优于一步到位

### 分层，分块，分而治之