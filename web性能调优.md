### 调优
1. 计划和度量
    1. 性能与用户体验有的时候是互斥的
    2. 性能调优要有正确的目标，比如首页打开时间降到1s内等等，但你是个中后台管理应用，首页
    降到1s内和2s秒内没啥区别
    3. 性能监控网站 Lighthouse, WebPageTest, SpeedCurve, New Reli
    4. 分享性能清单
2. 指定目标
    1. 性能目标
        1. 首屏渲染低于1s
        2. 速度指标 < 2250
        3. 3G上交互时间 < 5s


### 页面渲染
1. 生成DOM
2. 生成CSSOM
这两个有了就可以生成RenderTree然后渲染

有时DOM可能没有完全解析（比如被script标签阻塞了DOM解析，那就只生成了script标签前面的DOM）但浏览器只要生成了一些DOM(当有CSS时还需要下载解析CSSOM,他可能不阻塞DOM解析，但一定会阻塞RenderTree的生成)，浏览器就会显示这一部分。

> 默认情况下，CSS 被视为阻塞渲染的资源，这意味着浏览器将不会渲染任何已处理的内容，直至 CSSOM 构建完毕。请务必精简您的 CSS，尽快提供它，并利用媒体类型和查询来解除对渲染的阻塞


### 性能优化
1. 请求数量
2. 请求带宽
3. 缓存利用， 浏览器缓存, CDN, DNS
    > 添加Expires头，配置ETag，使Ajax可缓存
3. 页面结构
    > 将样式表放在顶部，将脚本放在底部，尽早刷新文档的输出

### 缓存
1、CDN缓存

2、DNS缓存
当客户端的DNS缓存为空时，DNS查找的数量与Web页面中唯一主机名的数量相等。所以减少唯一主机名的数量就可以减少DNS查找的数量。

但是问题来了，有时候需要多设置主机数量，来增加DNS的负载均衡，因此减少DNS查找和增加主机数量形成了矛盾关系，经过实战DNS设置2-4个主机名是最佳的。更多负载均衡可以用其他方式实现，例如用nginx做负载均衡！


3、客户端缓存（无需请求的memory cache，disk cache，需要发请求验证的Etag、Last-Modified304）

4、Service Worker与缓存及离线缓存

5、PageCache与ajax缓存